<div class="p-1" *ngIf="users.length > 0 && !userSelected">

  <p-table [value]="_users" selectionMode="single" [(selection)]="userSelected" dataKey="id" [scrollable]="true"
    scrollHeight="67.5vh" (onRowSelect)="onUserSelected()" [globalFilterFields]="['username']"
    styleClass="p-datatable-sm">

    <ng-template pTemplate="caption">
      <span class="p-input-icon-left ml-auto">
        <i class="pi pi-search"></i>
        <input pInputText type="text" (input)="filter($event)" placeholder="Buscar usuario" />
      </span>
    </ng-template>

    <ng-template pTemplate="header">
      <tr>
        <th>
          <div class="w-full text-center">ID</div>
        </th>
        <th>
          <div class="w-full text-center">Usuario</div>
        </th>
        <th>
          <div class="w-full text-center">Nombre</div>
        </th>
        <th>
          <div class="w-full text-center">Correo electrónico</div>
        </th>
        <th>
          <div class="w-full text-center">Estado</div>
        </th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-user>
      <tr [pSelectableRow]="user">
        <td class="row-user ">
          <div class="w-full text-center text-opaque ml-2">{{ user.id }}</div>
        </td>
        <td class="row-user">
          <div class="w-full text-center"> {{ user.username }} </div>
        </td>
        <td class="row-user">
          <div> {{ user.firstName }} {{ user.lastName }} </div>
        </td>
        <td class="row-user">
          <div> {{ user.email }} </div>
        </td>
        <td class="row-user">
          <div class="w-full text-center">
            <span class="dot" [class]="{'green-status':user.status==='AC','red-status':user.status==='BA'}"></span>
          </div>
        </td>
      </tr>

    </ng-template>

  </p-table>

</div>


<div *ngIf="userSelected" class="p-4 flex ml-3" style="align-items: center;">
  <div class="mr-3" style="max-width: 90%;">
    Usuario seleccionado: <b> {{ userSelected.username }} </b>
  </div>
  <div class="ml-auto">
    <button pButton pRipple title="Quitar selección" type="button" icon="pi pi-times" (click)="onUserUnselected()"
      class="p-button-outlined p-button-rounded p-button-danger"></button>
  </div>
</div>
